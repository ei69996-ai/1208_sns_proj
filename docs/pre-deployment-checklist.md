# 배포 전 체크리스트

이 문서는 프로덕션 배포 전에 확인해야 할 항목들을 정리한 체크리스트입니다.

## 기능 테스트

### 홈 피드
- [ ] 게시물 목록이 올바르게 표시되는지 확인
- [ ] 무한 스크롤이 작동하는지 확인
- [ ] 게시물 이미지가 올바르게 로드되는지 확인
- [ ] 좋아요 버튼이 작동하는지 확인
- [ ] 댓글 미리보기가 표시되는지 확인

### 게시물 작성
- [ ] 이미지 선택이 작동하는지 확인
- [ ] 이미지 미리보기가 표시되는지 확인
- [ ] 캡션 입력이 작동하는지 확인
- [ ] 게시물 업로드가 성공하는지 확인
- [ ] 업로드 후 피드가 자동으로 새로고침되는지 확인

### 게시물 상세
- [ ] 게시물 클릭 시 모달이 열리는지 확인
- [ ] 모달에서 이미지가 올바르게 표시되는지 확인
- [ ] 댓글 목록이 표시되는지 확인
- [ ] 댓글 작성이 작동하는지 확인
- [ ] 댓글 삭제가 작동하는지 확인 (본인 댓글만)
- [ ] 게시물 삭제가 작동하는지 확인 (본인 게시물만)

### 프로필 페이지
- [ ] 프로필 정보가 올바르게 표시되는지 확인
- [ ] 게시물 그리드가 올바르게 표시되는지 확인
- [ ] 팔로우/언팔로우 버튼이 작동하는지 확인
- [ ] 통계(게시물 수, 팔로워 수, 팔로잉 수)가 올바른지 확인

### 인증
- [ ] 로그인이 작동하는지 확인
- [ ] 로그아웃이 작동하는지 확인
- [ ] 회원가입이 작동하는지 확인
- [ ] 사용자 동기화가 작동하는지 확인

## 반응형 테스트

### 모바일 (< 768px)
- [ ] 하단 네비게이션이 표시되는지 확인
- [ ] 사이드바가 숨겨지는지 확인
- [ ] 게시물 카드가 올바르게 표시되는지 확인
- [ ] 모달이 전체 화면으로 표시되는지 확인
- [ ] 프로필 그리드가 2열로 표시되는지 확인

### 태블릿 (768px ~ 1023px)
- [ ] 사이드바가 72px 너비로 표시되는지 확인
- [ ] 하단 네비게이션이 숨겨지는지 확인
- [ ] 게시물 카드가 올바르게 표시되는지 확인

### 데스크톱 (1024px+)
- [ ] 사이드바가 244px 너비로 표시되는지 확인
- [ ] 게시물 카드가 최대 630px로 중앙 정렬되는지 확인
- [ ] 모달이 올바르게 표시되는지 확인

## 접근성 테스트

### 키보드 네비게이션
- [ ] Tab 키로 모든 요소에 접근 가능한지 확인
- [ ] Enter/Space 키로 버튼/링크가 작동하는지 확인
- [ ] ESC 키로 모달이 닫히는지 확인
- [ ] 포커스 표시가 명확한지 확인

### ARIA 레이블
- [ ] 모든 버튼에 `aria-label`이 있는지 확인
- [ ] 모달에 `aria-labelledby`가 있는지 확인
- [ ] 메뉴에 `aria-expanded`, `aria-haspopup`이 있는지 확인

### 색상 대비
- [ ] 텍스트와 배경의 대비가 충분한지 확인 (WCAG 2.1 AA 기준)
- [ ] 버튼과 배경의 대비가 충분한지 확인

## 성능 테스트

### 로컬 프로덕션 빌드
- [ ] `pnpm build` 성공 확인
- [ ] `pnpm start`로 프로덕션 서버 실행 확인
- [ ] 모든 페이지가 올바르게 로드되는지 확인

### Lighthouse 점수
- [ ] Performance: 90+ 목표
- [ ] Accessibility: 90+ 목표
- [ ] Best Practices: 90+ 목표
- [ ] SEO: 90+ 목표

### 이미지 최적화
- [ ] Next.js Image 컴포넌트 사용 확인
- [ ] `sizes` 속성이 올바르게 설정되었는지 확인
- [ ] Lazy loading이 작동하는지 확인

## 코드 품질

### 린팅
- [ ] `pnpm lint` 실행하여 에러 없음 확인
- [ ] `pnpm lint:fix` 실행하여 자동 수정 가능한 문제 해결

### 타입 안정성
- [ ] TypeScript 컴파일 에러 없음 확인
- [ ] `any` 타입 사용 최소화 확인

### 코드 포맷팅
- [ ] `pnpm format:check` 실행하여 포맷팅 일관성 확인
- [ ] 필요시 `pnpm format` 실행

## 환경 변수 확인

### 필수 환경 변수
- [ ] `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`
- [ ] `CLERK_SECRET_KEY`
- [ ] `NEXT_PUBLIC_SUPABASE_URL`
- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- [ ] `SUPABASE_SERVICE_ROLE_KEY`
- [ ] `NEXT_PUBLIC_STORAGE_BUCKET`

### 환경 변수 값 확인
- [ ] 프로덕션 환경의 올바른 값이 설정되었는지 확인
- [ ] 개발 환경과 프로덕션 환경의 값이 구분되어 있는지 확인

## 데이터베이스 확인

### 스키마
- [ ] 모든 테이블이 생성되었는지 확인
- [ ] 모든 뷰가 생성되었는지 확인
- [ ] 모든 인덱스가 생성되었는지 확인

### RLS 정책
- [ ] 프로덕션 환경에서 RLS가 활성화되었는지 확인
- [ ] 필요한 RLS 정책이 모두 설정되었는지 확인

### Storage 버킷
- [ ] `uploads` 버킷이 생성되었는지 확인
- [ ] 버킷이 공개로 설정되었는지 확인
- [ ] RLS 정책이 올바르게 설정되었는지 확인

## 보안 확인

### 환경 변수 보안
- [ ] `.env` 파일이 `.gitignore`에 포함되어 있는지 확인
- [ ] `.env.local` 파일이 `.gitignore`에 포함되어 있는지 확인
- [ ] 민감한 정보가 코드에 하드코딩되지 않았는지 확인

### API 보안
- [ ] 인증이 필요한 API 엔드포인트에 인증 체크가 있는지 확인
- [ ] 사용자 권한 체크가 올바르게 구현되었는지 확인

## 문서화

### README
- [ ] README.md가 최신 상태인지 확인
- [ ] 설치 가이드가 명확한지 확인
- [ ] 환경 변수 설정 가이드가 있는지 확인

### 배포 가이드
- [ ] `docs/deployment.md`가 작성되었는지 확인
- [ ] Vercel 배포 단계가 명확한지 확인

## 최종 확인

- [ ] 모든 체크리스트 항목 완료
- [ ] 로컬 프로덕션 빌드 성공
- [ ] 모든 기능이 정상 작동
- [ ] 성능 지표가 목표를 달성
- [ ] 접근성이 기준을 충족

## 배포 실행

모든 체크리스트 항목을 완료한 후:

1. Vercel에 프로젝트 연결
2. 환경 변수 설정
3. 배포 실행
4. 배포 후 기능 테스트
5. 성능 모니터링

